<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tiny.js | Tiny.js 开发感受(贪吃蛇)</title>
    <meta name="description" content="一款轻量级 HTML5 2D 互动引擎">
    
    
    <link rel="preload" href="/assets/css/styles.43fa66e0.css" as="style"><link rel="preload" href="/assets/js/app.43fa66e0.js" as="script"><link rel="preload" href="/assets/js/191.51df370c.js" as="script"><link rel="prefetch" href="/assets/css/3.styles.ed1604aa.css"><link rel="prefetch" href="/assets/css/4.styles.8a428984.css"><link rel="prefetch" href="/assets/css/5.styles.237d39c4.css"><link rel="prefetch" href="/assets/css/6.styles.7a6d23b1.css"><link rel="prefetch" href="/assets/css/7.styles.979a78f3.css"><link rel="prefetch" href="/assets/css/8.styles.29a5fabc.css"><link rel="prefetch" href="/assets/js/0.1f6843fa.js"><link rel="prefetch" href="/assets/js/1.197591db.js"><link rel="prefetch" href="/assets/js/10.24a221c5.js"><link rel="prefetch" href="/assets/js/100.775e334e.js"><link rel="prefetch" href="/assets/js/101.74ce72f4.js"><link rel="prefetch" href="/assets/js/102.cb69465b.js"><link rel="prefetch" href="/assets/js/103.be8aa51a.js"><link rel="prefetch" href="/assets/js/104.292646c7.js"><link rel="prefetch" href="/assets/js/105.b70d5db4.js"><link rel="prefetch" href="/assets/js/106.23d652b5.js"><link rel="prefetch" href="/assets/js/107.8e846a18.js"><link rel="prefetch" href="/assets/js/108.453ed432.js"><link rel="prefetch" href="/assets/js/109.22adfc18.js"><link rel="prefetch" href="/assets/js/11.0169d3e2.js"><link rel="prefetch" href="/assets/js/110.a3f845e6.js"><link rel="prefetch" href="/assets/js/111.b5d2c136.js"><link rel="prefetch" href="/assets/js/112.3549724b.js"><link rel="prefetch" href="/assets/js/113.e41260ed.js"><link rel="prefetch" href="/assets/js/114.98f312d0.js"><link rel="prefetch" href="/assets/js/115.06b5f39f.js"><link rel="prefetch" href="/assets/js/116.475cb5ee.js"><link rel="prefetch" href="/assets/js/117.1ef50961.js"><link rel="prefetch" href="/assets/js/118.c04507fd.js"><link rel="prefetch" href="/assets/js/119.3fc5bcb6.js"><link rel="prefetch" href="/assets/js/12.96b0acc6.js"><link rel="prefetch" href="/assets/js/120.581651f9.js"><link rel="prefetch" href="/assets/js/121.1de44dd4.js"><link rel="prefetch" href="/assets/js/122.e948d651.js"><link rel="prefetch" href="/assets/js/123.ecae81e8.js"><link rel="prefetch" href="/assets/js/124.a5a838b5.js"><link rel="prefetch" href="/assets/js/125.425f399e.js"><link rel="prefetch" href="/assets/js/126.7d378595.js"><link rel="prefetch" href="/assets/js/127.0172323e.js"><link rel="prefetch" href="/assets/js/128.771875c4.js"><link rel="prefetch" href="/assets/js/129.7fd33239.js"><link rel="prefetch" href="/assets/js/13.aa8c54ae.js"><link rel="prefetch" href="/assets/js/130.157dadf1.js"><link rel="prefetch" href="/assets/js/131.afdaf848.js"><link rel="prefetch" href="/assets/js/132.28eec555.js"><link rel="prefetch" href="/assets/js/133.29bd231e.js"><link rel="prefetch" href="/assets/js/134.aff86f29.js"><link rel="prefetch" href="/assets/js/135.c909ac83.js"><link rel="prefetch" href="/assets/js/136.07a9ccc5.js"><link rel="prefetch" href="/assets/js/137.e3b22525.js"><link rel="prefetch" href="/assets/js/138.b064af2c.js"><link rel="prefetch" href="/assets/js/139.09cc6da3.js"><link rel="prefetch" href="/assets/js/14.d8f2e965.js"><link rel="prefetch" href="/assets/js/140.a0ef6265.js"><link rel="prefetch" href="/assets/js/141.94dbf484.js"><link rel="prefetch" href="/assets/js/142.e1cf3658.js"><link rel="prefetch" href="/assets/js/143.a897b873.js"><link rel="prefetch" href="/assets/js/144.a9d289cd.js"><link rel="prefetch" href="/assets/js/145.503d4fbf.js"><link rel="prefetch" href="/assets/js/146.1cd37592.js"><link rel="prefetch" href="/assets/js/147.ff465738.js"><link rel="prefetch" href="/assets/js/148.7aa8f7f1.js"><link rel="prefetch" href="/assets/js/149.6b7f76b7.js"><link rel="prefetch" href="/assets/js/15.501b9701.js"><link rel="prefetch" href="/assets/js/150.2ac1a66c.js"><link rel="prefetch" href="/assets/js/151.07878840.js"><link rel="prefetch" href="/assets/js/152.ddb48ac5.js"><link rel="prefetch" href="/assets/js/153.a0e20fa6.js"><link rel="prefetch" href="/assets/js/154.57873e2c.js"><link rel="prefetch" href="/assets/js/155.890d27e6.js"><link rel="prefetch" href="/assets/js/156.56801cf4.js"><link rel="prefetch" href="/assets/js/157.693dd714.js"><link rel="prefetch" href="/assets/js/158.e5c87ab3.js"><link rel="prefetch" href="/assets/js/159.ef94c10d.js"><link rel="prefetch" href="/assets/js/16.8da13979.js"><link rel="prefetch" href="/assets/js/160.82139227.js"><link rel="prefetch" href="/assets/js/161.461d1ce2.js"><link rel="prefetch" href="/assets/js/162.e7c90ad4.js"><link rel="prefetch" href="/assets/js/163.93d329f8.js"><link rel="prefetch" href="/assets/js/164.1b6663fc.js"><link rel="prefetch" href="/assets/js/165.87c86691.js"><link rel="prefetch" href="/assets/js/166.831181aa.js"><link rel="prefetch" href="/assets/js/167.b0ce80a6.js"><link rel="prefetch" href="/assets/js/168.51b2ad70.js"><link rel="prefetch" href="/assets/js/169.5991c06e.js"><link rel="prefetch" href="/assets/js/17.98127a6b.js"><link rel="prefetch" href="/assets/js/170.3dc35441.js"><link rel="prefetch" href="/assets/js/171.a41c904d.js"><link rel="prefetch" href="/assets/js/172.724e2a03.js"><link rel="prefetch" href="/assets/js/173.9fd28684.js"><link rel="prefetch" href="/assets/js/174.4cd58ddb.js"><link rel="prefetch" href="/assets/js/175.8487267f.js"><link rel="prefetch" href="/assets/js/176.2d99ab9a.js"><link rel="prefetch" href="/assets/js/177.58b81ec7.js"><link rel="prefetch" href="/assets/js/178.59f9d23d.js"><link rel="prefetch" href="/assets/js/179.92b644ed.js"><link rel="prefetch" href="/assets/js/18.623782b4.js"><link rel="prefetch" href="/assets/js/180.36b9ffc7.js"><link rel="prefetch" href="/assets/js/181.481db6af.js"><link rel="prefetch" href="/assets/js/182.fe43407f.js"><link rel="prefetch" href="/assets/js/183.5d6cbf9e.js"><link rel="prefetch" href="/assets/js/184.c104dd11.js"><link rel="prefetch" href="/assets/js/185.730d8c13.js"><link rel="prefetch" href="/assets/js/186.f5b1cd60.js"><link rel="prefetch" href="/assets/js/187.84dfcd10.js"><link rel="prefetch" href="/assets/js/188.38d8c12c.js"><link rel="prefetch" href="/assets/js/189.23aaae68.js"><link rel="prefetch" href="/assets/js/19.3911cac1.js"><link rel="prefetch" href="/assets/js/190.0dec40c8.js"><link rel="prefetch" href="/assets/js/192.1464df71.js"><link rel="prefetch" href="/assets/js/193.276d9332.js"><link rel="prefetch" href="/assets/js/194.9c83fbb7.js"><link rel="prefetch" href="/assets/js/195.bc21e223.js"><link rel="prefetch" href="/assets/js/196.a1ca5fca.js"><link rel="prefetch" href="/assets/js/197.566317fd.js"><link rel="prefetch" href="/assets/js/198.d200718b.js"><link rel="prefetch" href="/assets/js/199.f7538f92.js"><link rel="prefetch" href="/assets/js/20.c215ffec.js"><link rel="prefetch" href="/assets/js/200.20b80e37.js"><link rel="prefetch" href="/assets/js/201.db55e563.js"><link rel="prefetch" href="/assets/js/202.d2aada70.js"><link rel="prefetch" href="/assets/js/203.8d3f9f23.js"><link rel="prefetch" href="/assets/js/204.008de9bc.js"><link rel="prefetch" href="/assets/js/205.8f0e731b.js"><link rel="prefetch" href="/assets/js/206.068f380b.js"><link rel="prefetch" href="/assets/js/207.3dabf8fb.js"><link rel="prefetch" href="/assets/js/208.719540d3.js"><link rel="prefetch" href="/assets/js/209.de07bc7a.js"><link rel="prefetch" href="/assets/js/21.d0bd103b.js"><link rel="prefetch" href="/assets/js/210.f53f9827.js"><link rel="prefetch" href="/assets/js/211.3d3ba60f.js"><link rel="prefetch" href="/assets/js/212.ed111db0.js"><link rel="prefetch" href="/assets/js/213.433f03c2.js"><link rel="prefetch" href="/assets/js/214.94717718.js"><link rel="prefetch" href="/assets/js/215.fe8bfcdf.js"><link rel="prefetch" href="/assets/js/216.efef845e.js"><link rel="prefetch" href="/assets/js/217.32ec5c59.js"><link rel="prefetch" href="/assets/js/218.cca30282.js"><link rel="prefetch" href="/assets/js/219.157e8f3a.js"><link rel="prefetch" href="/assets/js/22.93ec8cb1.js"><link rel="prefetch" href="/assets/js/220.751610ef.js"><link rel="prefetch" href="/assets/js/221.7a3dd394.js"><link rel="prefetch" href="/assets/js/222.4808c577.js"><link rel="prefetch" href="/assets/js/223.bbac19bc.js"><link rel="prefetch" href="/assets/js/224.a08833be.js"><link rel="prefetch" href="/assets/js/225.c1eb5ca5.js"><link rel="prefetch" href="/assets/js/226.b4539741.js"><link rel="prefetch" href="/assets/js/227.9eded322.js"><link rel="prefetch" href="/assets/js/228.1a55be39.js"><link rel="prefetch" href="/assets/js/229.9f1aa5ce.js"><link rel="prefetch" href="/assets/js/23.392bfc32.js"><link rel="prefetch" href="/assets/js/230.15806d33.js"><link rel="prefetch" href="/assets/js/231.23df5395.js"><link rel="prefetch" href="/assets/js/232.d31c1bea.js"><link rel="prefetch" href="/assets/js/233.eed3505b.js"><link rel="prefetch" href="/assets/js/234.2a2ccf67.js"><link rel="prefetch" href="/assets/js/235.0c854f59.js"><link rel="prefetch" href="/assets/js/236.434a99c2.js"><link rel="prefetch" href="/assets/js/237.87fc0ce4.js"><link rel="prefetch" href="/assets/js/238.9429cce8.js"><link rel="prefetch" href="/assets/js/239.811ac5dd.js"><link rel="prefetch" href="/assets/js/24.a76f41a8.js"><link rel="prefetch" href="/assets/js/240.5031fda0.js"><link rel="prefetch" href="/assets/js/241.123614be.js"><link rel="prefetch" href="/assets/js/242.e78d1024.js"><link rel="prefetch" href="/assets/js/243.eefd15fa.js"><link rel="prefetch" href="/assets/js/244.ee1fe57c.js"><link rel="prefetch" href="/assets/js/245.78323e44.js"><link rel="prefetch" href="/assets/js/246.b6fbda36.js"><link rel="prefetch" href="/assets/js/247.86fdbebc.js"><link rel="prefetch" href="/assets/js/248.440ae3b8.js"><link rel="prefetch" href="/assets/js/249.7c16c49e.js"><link rel="prefetch" href="/assets/js/25.40934fff.js"><link rel="prefetch" href="/assets/js/250.49880500.js"><link rel="prefetch" href="/assets/js/251.24001caa.js"><link rel="prefetch" href="/assets/js/252.5b0a4ec0.js"><link rel="prefetch" href="/assets/js/253.1c57d467.js"><link rel="prefetch" href="/assets/js/254.18deb650.js"><link rel="prefetch" href="/assets/js/255.1d98dc4e.js"><link rel="prefetch" href="/assets/js/256.b1165a95.js"><link rel="prefetch" href="/assets/js/257.17e1a9da.js"><link rel="prefetch" href="/assets/js/258.17c54d3e.js"><link rel="prefetch" href="/assets/js/259.bbacec4c.js"><link rel="prefetch" href="/assets/js/26.77679801.js"><link rel="prefetch" href="/assets/js/260.e77256e0.js"><link rel="prefetch" href="/assets/js/261.74388889.js"><link rel="prefetch" href="/assets/js/262.f19346d0.js"><link rel="prefetch" href="/assets/js/263.0dfd93a5.js"><link rel="prefetch" href="/assets/js/264.8db743ef.js"><link rel="prefetch" href="/assets/js/265.4717be43.js"><link rel="prefetch" href="/assets/js/266.3ad76183.js"><link rel="prefetch" href="/assets/js/267.0265f222.js"><link rel="prefetch" href="/assets/js/268.153992df.js"><link rel="prefetch" href="/assets/js/269.21a994f9.js"><link rel="prefetch" href="/assets/js/27.2128a33b.js"><link rel="prefetch" href="/assets/js/270.01e702e7.js"><link rel="prefetch" href="/assets/js/271.460721e7.js"><link rel="prefetch" href="/assets/js/272.57eba1ca.js"><link rel="prefetch" href="/assets/js/273.574ac42f.js"><link rel="prefetch" href="/assets/js/274.43f37b40.js"><link rel="prefetch" href="/assets/js/275.1e6022ee.js"><link rel="prefetch" href="/assets/js/276.b68b9392.js"><link rel="prefetch" href="/assets/js/277.097c781d.js"><link rel="prefetch" href="/assets/js/278.aae628d8.js"><link rel="prefetch" href="/assets/js/279.1935b636.js"><link rel="prefetch" href="/assets/js/28.12c411b8.js"><link rel="prefetch" href="/assets/js/280.cdb47f79.js"><link rel="prefetch" href="/assets/js/281.961974ad.js"><link rel="prefetch" href="/assets/js/282.9f5aa635.js"><link rel="prefetch" href="/assets/js/283.dade29eb.js"><link rel="prefetch" href="/assets/js/284.ac29eb06.js"><link rel="prefetch" href="/assets/js/285.303aa914.js"><link rel="prefetch" href="/assets/js/286.d7b5f1a4.js"><link rel="prefetch" href="/assets/js/287.e5f6ad23.js"><link rel="prefetch" href="/assets/js/288.c4880985.js"><link rel="prefetch" href="/assets/js/289.6052f690.js"><link rel="prefetch" href="/assets/js/29.effcee42.js"><link rel="prefetch" href="/assets/js/290.27cc2248.js"><link rel="prefetch" href="/assets/js/291.0a9a2daf.js"><link rel="prefetch" href="/assets/js/292.e06c242e.js"><link rel="prefetch" href="/assets/js/293.a194318d.js"><link rel="prefetch" href="/assets/js/294.557edaf7.js"><link rel="prefetch" href="/assets/js/295.beaa6e23.js"><link rel="prefetch" href="/assets/js/296.06e20f09.js"><link rel="prefetch" href="/assets/js/297.335f55ca.js"><link rel="prefetch" href="/assets/js/298.8cf21627.js"><link rel="prefetch" href="/assets/js/299.cc24c869.js"><link rel="prefetch" href="/assets/js/30.13c4002d.js"><link rel="prefetch" href="/assets/js/300.806cb83f.js"><link rel="prefetch" href="/assets/js/301.d3a13587.js"><link rel="prefetch" href="/assets/js/302.3a846a8c.js"><link rel="prefetch" href="/assets/js/303.bbb9ba38.js"><link rel="prefetch" href="/assets/js/304.80fdf3ef.js"><link rel="prefetch" href="/assets/js/305.585bbb39.js"><link rel="prefetch" href="/assets/js/306.98dba587.js"><link rel="prefetch" href="/assets/js/307.1e50f4c6.js"><link rel="prefetch" href="/assets/js/308.1def2c41.js"><link rel="prefetch" href="/assets/js/309.68f19ceb.js"><link rel="prefetch" href="/assets/js/31.763d6e45.js"><link rel="prefetch" href="/assets/js/310.5c746ef8.js"><link rel="prefetch" href="/assets/js/311.33f3a2a7.js"><link rel="prefetch" href="/assets/js/312.dc16828f.js"><link rel="prefetch" href="/assets/js/313.a43c1570.js"><link rel="prefetch" href="/assets/js/314.20f31e9b.js"><link rel="prefetch" href="/assets/js/315.1b7c322e.js"><link rel="prefetch" href="/assets/js/316.8a668b81.js"><link rel="prefetch" href="/assets/js/317.580c6010.js"><link rel="prefetch" href="/assets/js/318.293b1211.js"><link rel="prefetch" href="/assets/js/319.30990aa1.js"><link rel="prefetch" href="/assets/js/32.ef7cca21.js"><link rel="prefetch" href="/assets/js/320.5163fb79.js"><link rel="prefetch" href="/assets/js/321.1dc03917.js"><link rel="prefetch" href="/assets/js/322.2b3ec212.js"><link rel="prefetch" href="/assets/js/323.54131d96.js"><link rel="prefetch" href="/assets/js/324.46bed123.js"><link rel="prefetch" href="/assets/js/325.8591ece6.js"><link rel="prefetch" href="/assets/js/326.0c93af07.js"><link rel="prefetch" href="/assets/js/327.406da243.js"><link rel="prefetch" href="/assets/js/328.018284e7.js"><link rel="prefetch" href="/assets/js/329.effc9758.js"><link rel="prefetch" href="/assets/js/33.5632058e.js"><link rel="prefetch" href="/assets/js/330.2dc00fe0.js"><link rel="prefetch" href="/assets/js/331.77a6ddd5.js"><link rel="prefetch" href="/assets/js/332.c7c1d766.js"><link rel="prefetch" href="/assets/js/333.a123c332.js"><link rel="prefetch" href="/assets/js/334.01b94132.js"><link rel="prefetch" href="/assets/js/335.1d073063.js"><link rel="prefetch" href="/assets/js/336.4b190008.js"><link rel="prefetch" href="/assets/js/337.1518d541.js"><link rel="prefetch" href="/assets/js/338.5f6ffd72.js"><link rel="prefetch" href="/assets/js/339.652d846f.js"><link rel="prefetch" href="/assets/js/34.18872b82.js"><link rel="prefetch" href="/assets/js/340.d5a2d6b5.js"><link rel="prefetch" href="/assets/js/341.2e142c90.js"><link rel="prefetch" href="/assets/js/342.4532575a.js"><link rel="prefetch" href="/assets/js/343.787e39c2.js"><link rel="prefetch" href="/assets/js/344.e5d739dc.js"><link rel="prefetch" href="/assets/js/345.31371239.js"><link rel="prefetch" href="/assets/js/346.1a925c16.js"><link rel="prefetch" href="/assets/js/347.72b54463.js"><link rel="prefetch" href="/assets/js/348.94cf79dc.js"><link rel="prefetch" href="/assets/js/349.45266252.js"><link rel="prefetch" href="/assets/js/35.e1d1a951.js"><link rel="prefetch" href="/assets/js/350.6d956f12.js"><link rel="prefetch" href="/assets/js/351.c077fe01.js"><link rel="prefetch" href="/assets/js/352.9b3f1ea0.js"><link rel="prefetch" href="/assets/js/353.e91864d4.js"><link rel="prefetch" href="/assets/js/354.481a1e43.js"><link rel="prefetch" href="/assets/js/355.ce33628c.js"><link rel="prefetch" href="/assets/js/356.b7c9c23b.js"><link rel="prefetch" href="/assets/js/357.f3b8a61e.js"><link rel="prefetch" href="/assets/js/358.868d2558.js"><link rel="prefetch" href="/assets/js/359.94d1d49c.js"><link rel="prefetch" href="/assets/js/36.f88050c8.js"><link rel="prefetch" href="/assets/js/360.fd5cd455.js"><link rel="prefetch" href="/assets/js/361.783fe2ea.js"><link rel="prefetch" href="/assets/js/362.7f0ce26c.js"><link rel="prefetch" href="/assets/js/363.32707230.js"><link rel="prefetch" href="/assets/js/364.7a69742a.js"><link rel="prefetch" href="/assets/js/365.fb05dfb7.js"><link rel="prefetch" href="/assets/js/366.e19579a3.js"><link rel="prefetch" href="/assets/js/367.215b8aa0.js"><link rel="prefetch" href="/assets/js/368.edcb98df.js"><link rel="prefetch" href="/assets/js/369.144d69e1.js"><link rel="prefetch" href="/assets/js/37.bc5b9c92.js"><link rel="prefetch" href="/assets/js/370.30c502fe.js"><link rel="prefetch" href="/assets/js/371.c9878b5e.js"><link rel="prefetch" href="/assets/js/372.b5bb5117.js"><link rel="prefetch" href="/assets/js/373.6692dbb4.js"><link rel="prefetch" href="/assets/js/374.2565ad41.js"><link rel="prefetch" href="/assets/js/375.501ef6ec.js"><link rel="prefetch" href="/assets/js/376.4d50b248.js"><link rel="prefetch" href="/assets/js/377.d54165ea.js"><link rel="prefetch" href="/assets/js/378.e64a097f.js"><link rel="prefetch" href="/assets/js/379.720e7ebb.js"><link rel="prefetch" href="/assets/js/38.1330bd03.js"><link rel="prefetch" href="/assets/js/380.ac1c7db9.js"><link rel="prefetch" href="/assets/js/381.27a7e71d.js"><link rel="prefetch" href="/assets/js/382.84f4fb76.js"><link rel="prefetch" href="/assets/js/383.8773ae76.js"><link rel="prefetch" href="/assets/js/384.432fd881.js"><link rel="prefetch" href="/assets/js/385.58fdc9e7.js"><link rel="prefetch" href="/assets/js/386.775e9cee.js"><link rel="prefetch" href="/assets/js/387.87d3b504.js"><link rel="prefetch" href="/assets/js/388.2b6e7094.js"><link rel="prefetch" href="/assets/js/389.89b2919f.js"><link rel="prefetch" href="/assets/js/39.65663a77.js"><link rel="prefetch" href="/assets/js/390.603e09b4.js"><link rel="prefetch" href="/assets/js/391.f42d3f81.js"><link rel="prefetch" href="/assets/js/392.5ad37374.js"><link rel="prefetch" href="/assets/js/393.cd845817.js"><link rel="prefetch" href="/assets/js/394.02d8dd79.js"><link rel="prefetch" href="/assets/js/395.963c7677.js"><link rel="prefetch" href="/assets/js/396.145109d5.js"><link rel="prefetch" href="/assets/js/397.be6e91fd.js"><link rel="prefetch" href="/assets/js/398.b0133c31.js"><link rel="prefetch" href="/assets/js/399.575822ff.js"><link rel="prefetch" href="/assets/js/4.8a428984.js"><link rel="prefetch" href="/assets/js/40.8bf22acb.js"><link rel="prefetch" href="/assets/js/400.7d33a3d3.js"><link rel="prefetch" href="/assets/js/401.023177d3.js"><link rel="prefetch" href="/assets/js/402.7e1933f4.js"><link rel="prefetch" href="/assets/js/403.4a1038c8.js"><link rel="prefetch" href="/assets/js/404.850d05fb.js"><link rel="prefetch" href="/assets/js/405.26538b01.js"><link rel="prefetch" href="/assets/js/406.74479945.js"><link rel="prefetch" href="/assets/js/407.b712c87e.js"><link rel="prefetch" href="/assets/js/408.ce3f47ce.js"><link rel="prefetch" href="/assets/js/409.9d492c8c.js"><link rel="prefetch" href="/assets/js/41.741c2955.js"><link rel="prefetch" href="/assets/js/410.afbe5bc8.js"><link rel="prefetch" href="/assets/js/411.47b0779c.js"><link rel="prefetch" href="/assets/js/412.3bb5e470.js"><link rel="prefetch" href="/assets/js/413.087f7b76.js"><link rel="prefetch" href="/assets/js/414.3ba15d66.js"><link rel="prefetch" href="/assets/js/415.f1150964.js"><link rel="prefetch" href="/assets/js/416.fcb98555.js"><link rel="prefetch" href="/assets/js/417.124ef987.js"><link rel="prefetch" href="/assets/js/418.c5ce5a1d.js"><link rel="prefetch" href="/assets/js/419.c7d00d4d.js"><link rel="prefetch" href="/assets/js/42.1da0e0fa.js"><link rel="prefetch" href="/assets/js/420.9ab45570.js"><link rel="prefetch" href="/assets/js/421.70e9d427.js"><link rel="prefetch" href="/assets/js/422.1a42edec.js"><link rel="prefetch" href="/assets/js/423.673930eb.js"><link rel="prefetch" href="/assets/js/424.9311aaa9.js"><link rel="prefetch" href="/assets/js/425.e4a79b6d.js"><link rel="prefetch" href="/assets/js/426.cd86e00c.js"><link rel="prefetch" href="/assets/js/427.aed8a340.js"><link rel="prefetch" href="/assets/js/428.b12b2924.js"><link rel="prefetch" href="/assets/js/429.41471922.js"><link rel="prefetch" href="/assets/js/43.2e46675e.js"><link rel="prefetch" href="/assets/js/430.4e6f141b.js"><link rel="prefetch" href="/assets/js/44.8a2ae7a9.js"><link rel="prefetch" href="/assets/js/45.48a79423.js"><link rel="prefetch" href="/assets/js/46.7444b227.js"><link rel="prefetch" href="/assets/js/47.da06ff4f.js"><link rel="prefetch" href="/assets/js/48.931b2db0.js"><link rel="prefetch" href="/assets/js/49.7818e757.js"><link rel="prefetch" href="/assets/js/5.237d39c4.js"><link rel="prefetch" href="/assets/js/50.bfb4c8ab.js"><link rel="prefetch" href="/assets/js/51.862a33c9.js"><link rel="prefetch" href="/assets/js/52.833199de.js"><link rel="prefetch" href="/assets/js/53.30c3e6f1.js"><link rel="prefetch" href="/assets/js/54.21296301.js"><link rel="prefetch" href="/assets/js/55.78a5d44a.js"><link rel="prefetch" href="/assets/js/56.185559f4.js"><link rel="prefetch" href="/assets/js/57.1214f5f4.js"><link rel="prefetch" href="/assets/js/58.158bef83.js"><link rel="prefetch" href="/assets/js/59.8b92c350.js"><link rel="prefetch" href="/assets/js/6.7a6d23b1.js"><link rel="prefetch" href="/assets/js/60.95aeda12.js"><link rel="prefetch" href="/assets/js/61.3b8c5655.js"><link rel="prefetch" href="/assets/js/62.7a3c9037.js"><link rel="prefetch" href="/assets/js/63.a0465249.js"><link rel="prefetch" href="/assets/js/64.5cfb4e8f.js"><link rel="prefetch" href="/assets/js/65.43fc46fb.js"><link rel="prefetch" href="/assets/js/66.2fb23414.js"><link rel="prefetch" href="/assets/js/67.9aaee9e1.js"><link rel="prefetch" href="/assets/js/68.5fde8b15.js"><link rel="prefetch" href="/assets/js/69.1e4f93fe.js"><link rel="prefetch" href="/assets/js/7.979a78f3.js"><link rel="prefetch" href="/assets/js/70.ae122cb5.js"><link rel="prefetch" href="/assets/js/71.f35575a6.js"><link rel="prefetch" href="/assets/js/72.4b4d473e.js"><link rel="prefetch" href="/assets/js/73.4e73d0bb.js"><link rel="prefetch" href="/assets/js/74.0152771d.js"><link rel="prefetch" href="/assets/js/75.c46cbb38.js"><link rel="prefetch" href="/assets/js/76.de4ad0dc.js"><link rel="prefetch" href="/assets/js/77.98d89c53.js"><link rel="prefetch" href="/assets/js/78.1851573e.js"><link rel="prefetch" href="/assets/js/79.e4b69ee4.js"><link rel="prefetch" href="/assets/js/8.29a5fabc.js"><link rel="prefetch" href="/assets/js/80.8ae69a71.js"><link rel="prefetch" href="/assets/js/81.7c856867.js"><link rel="prefetch" href="/assets/js/82.42c14533.js"><link rel="prefetch" href="/assets/js/83.c60e2188.js"><link rel="prefetch" href="/assets/js/84.2a1ecd9f.js"><link rel="prefetch" href="/assets/js/85.99ad236c.js"><link rel="prefetch" href="/assets/js/86.8cd8040b.js"><link rel="prefetch" href="/assets/js/87.3e44bbc4.js"><link rel="prefetch" href="/assets/js/88.e625ba23.js"><link rel="prefetch" href="/assets/js/89.bff86787.js"><link rel="prefetch" href="/assets/js/9.bf27518b.js"><link rel="prefetch" href="/assets/js/90.81845e90.js"><link rel="prefetch" href="/assets/js/91.22b1be3d.js"><link rel="prefetch" href="/assets/js/92.e660a9e3.js"><link rel="prefetch" href="/assets/js/93.7f646f61.js"><link rel="prefetch" href="/assets/js/94.1ef6e5a5.js"><link rel="prefetch" href="/assets/js/95.0ea70b8e.js"><link rel="prefetch" href="/assets/js/96.5fd0f5dd.js"><link rel="prefetch" href="/assets/js/97.cf12755b.js"><link rel="prefetch" href="/assets/js/98.6860467d.js"><link rel="prefetch" href="/assets/js/99.fdc118b3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.ed1604aa.js">
    <link rel="stylesheet" href="/assets/css/styles.43fa66e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Tiny.js
    </span></a><!----><div class="links"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form><nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">文档</a></div><div class="nav-item"><a href="/api/" rel="noopener noreferrer" class="nav-link">
  API
  <!----></a></div><div class="nav-item"><a href="/playground/" class="nav-link">Playground</a></div><div class="nav-item"><a href="/examples/" class="nav-link">示例</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">插件</a></div><div class="nav-item"><a href="/tools/" class="nav-link">工具</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">文档</a></div><div class="nav-item"><a href="/api/" rel="noopener noreferrer" class="nav-link">
  API
  <!----></a></div><div class="nav-item"><a href="/playground/" class="nav-link">Playground</a></div><div class="nav-item"><a href="/examples/" class="nav-link">示例</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">插件</a></div><div class="nav-item"><a href="/tools/" class="nav-link">工具</a></div><!----></nav><ul class="sidebar-links"><li><a href="/blogs/" aria-current="page" class="sidebar-link">❮ 博客</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>仿微信「跳一跳」</span><span class="arrow right"></span></p><!----></div></li><li><a href="/blogs/mole.html" class="sidebar-link">地鼠和它们的地洞</a></li><li><a href="/blogs/snake.html" aria-current="page" class="active sidebar-link">Tiny.js 开发感受(贪吃蛇)</a></li><li><a href="/blogs/doodle.html" class="sidebar-link">【上手】用 Tiny 写个 DoodleJump 给你看</a></li><li><a href="/blogs/bone.html" class="sidebar-link">「Tiny.js 实战」骨骼动画</a></li></ul></div><div class="page"><div class="content"><h1 id="tiny-js-开发感受-贪吃蛇"><a href="#tiny-js-开发感受-贪吃蛇" aria-hidden="true" class="header-anchor">#</a> Tiny.js 开发感受(贪吃蛇)</h1><h3 id="前期准备"><a href="#前期准备" aria-hidden="true" class="header-anchor">#</a> 前期准备</h3><ul><li>根据 Tiny 官网的开始教程构建出项目，详情<a href="http://tinyjs.net/guide/start.html" target="_blank" rel="noopener noreferrer">点这里~<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>如果你是 es6 的重度使用者，你可能需要自己配置一下 webpack，Tiny 默认没有引入 babel，引入步骤如下：</li></ul><ol><li>安装 babel</li></ol><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> babel-core babel-loader babel-preset-es2015 babel-preset-stage-0 --save-dev
</code></pre></div><ol start="2"><li>在根目录下创建<code>.babelrc</code></li></ol><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stage-0&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>修改<code>webpack.config.json</code></li></ol><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  loaders<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>至此你的项目算是创建完成了...是不是很简单呢~</p><h3 id="进入正题"><a href="#进入正题" aria-hidden="true" class="header-anchor">#</a> 进入正题</h3><blockquote><p>我使用 Tiny 做了一个贪吃蛇 demo，没有过于复杂的逻辑，可以帮助熟悉 Tiny 开发。</p></blockquote><ul><li><p>开始之前首先要思考的是什么是贪吃蛇游戏？</p><ul><li>玩过贪吃蛇，都知道最简单的贪吃蛇就是几个方块相连，吃食物会变长，并且蛇会向上下左右四个方向移动。</li></ul></li><li><p>那如何实现最简单的贪吃蛇逻辑呢?</p><ul><li>其实很简单，在代码的世界里蛇可以看做是一个js代码里的数组我们维护一个拥有一定数量组成蛇的方块的数组，就可以表示一条蛇。而食物更简单，就是在场景内随机出现的一个点。了解了这些，我们还有个一个大问题，那就是蛇如何移动。</li></ul></li></ul><p>不卖关子了，最原始的贪吃蛇逻辑，就是将蛇数组的最后一个<code>item</code>，挪到数组的开头，并且坐标是蛇头坐标加蛇<code>item.width</code>，简单写个伪代码。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * 我们初始了一个蛇，并且蛇初始是有3个object组成，每个object拥有独立的4个属性宽，高，x，y。
 * 蛇头固定一个x，后面的每一节都比蛇头的坐标减少一个蛇身体宽度的坐标，刚好3个区块无缝连接在一起接下来就是简单的运动。
 * 将蛇数组的最后一个item拿出来，将他的x坐标设为蛇头的x加一个蛇身体的坐标并插到数组开头然后100ms执行一次，在表现上蛇就是在运动了。
 */</span>

<span class="token keyword">let</span> snakeArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 初始蛇由3个部分组成</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> snakePart <span class="token operator">=</span> <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token comment">// 这里的意思是，如果 i 为0， 则为蛇头，起始的蛇头 x 坐标为100， 其余的每个部分的坐标为蛇头减 i * 蛇身体宽度;</span>
    x<span class="token operator">:</span> i <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token number">100</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">-</span> <span class="token number">10</span> <span class="token operator">*</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  snakeArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>snakePart<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 接下来让蛇运动起来， 这里只演示横向</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> last <span class="token operator">=</span> snakeArr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">}</span> <span class="token operator">=</span> snakeArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  last<span class="token punctuation">.</span>x <span class="token operator">=</span> x <span class="token operator">+</span> width<span class="token punctuation">;</span>
  snakeArr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>last<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上是经典贪吃蛇的实现逻辑，其他部分本文不予以实现，各位可以自行脑洞实现以下。接下来，我们来看一下这个实现的问题。</p><blockquote><p>固然这样可以实现一个经典的贪吃蛇，但是真实出来的效果是一顿一顿的向前移动，以为我们蛇走的每一格都不能小于一个蛇身体的宽。有人可以想到，我可以将setInterval的时间间隔调小，执行的快一点。如果我们要实现一秒24帧的人眼流畅动画，那你根本不用玩了。蛇会在你没有操作就已经飞到屏幕外或者撞墙而亡。具体请自行脑洞。所以我们要做一个像素级别移动的贪吃蛇，最简单的想法是蛇的所有区块都跟随它的前一个区块移动，不就可以实现运动了呢?这样我们只需要挪动蛇头的位置，保存蛇头的运动轨迹，然后让其余部分跟随这个轨迹移动就可以了。这就是像素级贪吃蛇我的实现方式。</p></blockquote><h5 id="以上是实现逻辑，逻辑部分都讲清楚了，我们现在该考虑如何讲代码转化成肉眼可以见的蛇和食物呢"><a href="#以上是实现逻辑，逻辑部分都讲清楚了，我们现在该考虑如何讲代码转化成肉眼可以见的蛇和食物呢" aria-hidden="true" class="header-anchor">#</a> 以上是实现逻辑，逻辑部分都讲清楚了，我们现在该考虑如何讲代码转化成肉眼可以见的蛇和食物呢?</h5><blockquote><p>duang! duang! duang! 接下来，我们的 Tiny 要登场了，逻辑我们有了我们总要让他能出现在我们的页面中。这部分就是 Tiny 的强项了。Tiny 项目初始化的时候，会自动创建一些文件，我们看到 <code>main.js</code> 里有这么两行</p></blockquote><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Layer <span class="token keyword">from</span> <span class="token string">'./src/StartLayer'</span><span class="token punctuation">;</span>
<span class="token comment">// 此处省略100W行。。。</span>
Tiny<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Layer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 我们不需要知道太多，只要明白，Tiny.Application 的实例有一个 run 方法，这个方法以一个 layer 场景为参数来启动。</span>
</code></pre></div><h5 id="再看到-startlayer，它是一个继承自tiny-container的类，我们可以这么来理解这个-layer-的概念。一个画面，里面有很多个容器。一个主容器（就是我们看到的-startlayer），主容器内部还会有很多内容的小容器组成，比如我们贪吃蛇的蛇容器，食物容器等。所以-startlayer-我们改造成如下："><a href="#再看到-startlayer，它是一个继承自tiny-container的类，我们可以这么来理解这个-layer-的概念。一个画面，里面有很多个容器。一个主容器（就是我们看到的-startlayer），主容器内部还会有很多内容的小容器组成，比如我们贪吃蛇的蛇容器，食物容器等。所以-startlayer-我们改造成如下：" aria-hidden="true" class="header-anchor">#</a> 再看到 StartLayer，它是一个继承自<code>Tiny.Container</code>的类，我们可以这么来理解这个 layer 的概念。一个画面，里面有很多个容器。一个主容器（就是我们看到的 StartLayer），主容器内部还会有很多内容的小容器组成，比如我们贪吃蛇的蛇容器，食物容器等。所以 StartLayer 我们改造成如下：</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入蛇和食物layer</span>
<span class="token keyword">import</span> Snake <span class="token keyword">from</span> <span class="token string">'./Snake'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Food <span class="token keyword">from</span> <span class="token string">'./Food'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Layer</span> <span class="token keyword">extends</span> <span class="token class-name">Tiny<span class="token punctuation">.</span>Container</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化引入的蛇和食物</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Food</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>snake <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Snake</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Layer<span class="token punctuation">;</span>
</code></pre></div><h5 id="接下来就是实现蛇类和食物类了。"><a href="#接下来就是实现蛇类和食物类了。" aria-hidden="true" class="header-anchor">#</a> 接下来就是实现蛇类和食物类了。</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 蛇类</span>
<span class="token keyword">class</span> <span class="token class-name">Snake</span> <span class="token keyword">extends</span> <span class="token class-name">Tiny<span class="token punctuation">.</span>Container</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">layer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 初始化一些蛇的参数</span>

    <span class="token comment">// 获得 StartLayer</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>layer <span class="token operator">=</span> layer<span class="token punctuation">;</span>
    <span class="token comment">// 蛇初始的长度</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>initLength <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token comment">// 蛇每次调度移动的速度</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token comment">// 蛇身体的移动每次移动的距离</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>snakeConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
      distanceX <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token punctuation">,</span>
      distanceY <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 蛇头的运动轨迹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 蛇的数组</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化蛇方法</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initSnake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Snake<span class="token punctuation">;</span>
</code></pre></div><h5 id="接下来实现初始化蛇方法："><a href="#接下来实现初始化蛇方法：" aria-hidden="true" class="header-anchor">#</a> 接下来实现初始化蛇方法：</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">initSnake</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>initLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 蛇头和蛇身的图片不一样</span>
    <span class="token keyword">let</span> img <span class="token operator">=</span> i <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'res/images/head.png'</span> <span class="token operator">:</span> <span class="token string">'res/images/part.png'</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> part <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createSprite</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 调用 spirte 的实例方法 setScale 来实现缩放到 0.35</span>
      part<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">0.35</span>， <span class="token number">0.35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将这个蛇绘制到 snake 这个容器中，我们就能在页面上看到了</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 这里自己维护了一个蛇数组，其实可以通过 layer 的 children 成员来获得所有场景中的精灵实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 最后将整个蛇，渲染到 StartLayer 中</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>layer<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function-variable function">createSprite</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用fromImage来加载纹理</span>
  <span class="token keyword">let</span> texture <span class="token operator">=</span> Tiny<span class="token punctuation">.</span>Texture<span class="token punctuation">.</span><span class="token function">fromImage</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 将纹理贴到精灵上</span>
  <span class="token keyword">let</span> part <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiny<span class="token punctuation">.</span>Sprite</span><span class="token punctuation">(</span>texture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置所有 part 初始的属性</span>
  part<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>Tiny<span class="token punctuation">.</span><span class="token constant">WIN_SIZE</span><span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Tiny<span class="token punctuation">.</span><span class="token constant">WIN_SIZE</span><span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  part<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  part<span class="token punctuation">.</span><span class="token function">setAnchor</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 因为蛇最开始是横向沿 x 轴移动，贴图默认 0 度，蛇眼睛会朝上，所以旋转 90 度。</span>
  part<span class="token punctuation">.</span><span class="token function">setRotation</span><span class="token punctuation">(</span>Tiny<span class="token punctuation">.</span><span class="token function">deg2radian</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> part<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>这里使用 texture 来创建蛇，因为<code>Graphics</code>目前渲染可能会有性能问题，最好使用文理来处理，同时将所有蛇身体的起始点定在视窗的中心点，意思是蛇初始的时候，是从同一个点开始。</p><h5 id="蛇类应该会有一个-run-和-eat-方法，也就是吃和运动。"><a href="#蛇类应该会有一个-run-和-eat-方法，也就是吃和运动。" aria-hidden="true" class="header-anchor">#</a> 蛇类应该会有一个 run 和 eat 方法，也就是吃和运动。</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>distanceX， distanceY<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snakeConfig<span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token constant">R</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// 这个参数比较难理解，表面开来是在这个 speed 下，多久能跑完一个 R 的距离</span>
  <span class="token keyword">let</span> block <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token constant">R</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item， idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 蛇头</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>idx <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 通过蛇每次想蛇头 xy 坐标要移动的距离，算出蛇头旋转的角度</span>
      <span class="token keyword">let</span> ang <span class="token operator">=</span> <span class="token number">180</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>distanceY<span class="token punctuation">,</span> distanceX<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">90</span><span class="token punctuation">;</span>
      <span class="token comment">// 通过这个角度算出蛇头应该旋转多少弧度， 这里是修复蛇头在移动过程中方向贴图方向不对</span>
      item<span class="token punctuation">.</span><span class="token function">setRotation</span><span class="token punctuation">(</span>Tiny<span class="token punctuation">.</span><span class="token function">deg2radian</span><span class="token punctuation">(</span>ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置蛇头坐标，表示移动蛇头</span>
      item<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>x <span class="token operator">+</span> distanceX<span class="token punctuation">,</span> item<span class="token punctuation">.</span>y <span class="token operator">+</span> distanceY<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 保存蛇头的运动轨迹</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span> item<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">:</span> item<span class="token punctuation">.</span>y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 运动过程中还要吃食物</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
     * 因为蛇头和蛇身是在同一个点开始开始运动，所以蛇头必须走出一个蛇身的宽度，蛇头的下一个部分才能开始运动。
     * 转换到运动轨迹的数组中，也就是说有轨迹数组中有没有当前 index * block 这个索引的路径数据，如果有就移动对应 index 的部分。
     * 下面代码（idx * block - 1）减 1 是为了让第二个关节和蛇头不要有间隙。
     * 如果刚好按照算好的 idx * block 去取，虽然代码上是对的，但代码执行还需要一定时间，会导致蛇头和第二个关节出现一定的间隙。
     * （ps：目前只是本人猜测是这个原因。）
     */</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> idx <span class="token operator">*</span> block <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">[</span>idx <span class="token operator">*</span> block <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      item<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">[</span>idx <span class="token operator">*</span> block <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> distanceX<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">[</span>idx <span class="token operator">*</span> block <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> distanceY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 这块是优化， 销毁多余不用的路径数据</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">.</span>length <span class="token operator">*</span> block <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取蛇头</span>
  <span class="token keyword">let</span> head <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取食物容器下所有的食物</span>
  <span class="token keyword">let</span> foodArr <span class="token operator">=</span> food<span class="token punctuation">.</span>children<span class="token punctuation">;</span>

  foodArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 以下的是坐标系中已知两点坐标，算出两点之间的距离，因为蛇身和食物都 setAnchor(0.5)，坐标点定位在中心点</span>
    <span class="token comment">// 所以两点之间如果碰撞， 两点之间的距离一定是食物和蛇头半径之和</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>x <span class="token operator">-</span> item<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>y <span class="token operator">-</span> item<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 其实就是根号下 a 方+b 方</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如上逻辑</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>c <span class="token operator">&lt;</span> head<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> food<span class="token punctuation">.</span>foodConfig<span class="token punctuation">.</span>maxR <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 食物从食物的容器中 remove 掉</span>
      food<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 获取蛇最后一个身体</span>
      <span class="token keyword">let</span> lastItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 通过 createSprite 生成一个蛇身的精灵实例</span>
      <span class="token keyword">let</span> part <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createSprite</span><span class="token punctuation">(</span><span class="token string">'res/images/part.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置精灵实例的坐标</span>
      part<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>lastItem<span class="token punctuation">.</span>x<span class="token punctuation">,</span> lastItem<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 将其添加到自己维护的数组中</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>snakeBody<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 最后套路，添加到蛇 layer 中，以展示</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="以上就基本完成了蛇类的实现。这里并没有使用-tiny-的碰撞检测，因为需求简单。推荐大家使用-tiny-实现的碰撞检测。"><a href="#以上就基本完成了蛇类的实现。这里并没有使用-tiny-的碰撞检测，因为需求简单。推荐大家使用-tiny-实现的碰撞检测。" aria-hidden="true" class="header-anchor">#</a> 以上就基本完成了蛇类的实现。这里并没有使用 Tiny 的碰撞检测，因为需求简单。推荐大家使用 Tiny 实现的碰撞检测。</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 食物类</span>
<span class="token keyword">class</span> <span class="token class-name">Food</span> <span class="token keyword">extends</span> <span class="token class-name">Tiny<span class="token punctuation">.</span>Container</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">layer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 套路获取 StartLayer</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>layer <span class="token operator">=</span> layer<span class="token punctuation">;</span>
    <span class="token comment">// 渲染食物的数量</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>foodNum <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">// 食物的配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>foodConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
      maxR <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      minR <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 食物的颜色，以及特殊食物的贴图</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token number">0xD8BFD8</span><span class="token punctuation">,</span>
      <span class="token number">0x6495ED</span><span class="token punctuation">,</span>
      <span class="token number">0x7FFFAA</span><span class="token punctuation">,</span>
      <span class="token number">0xFF8C00</span><span class="token punctuation">,</span>
      <span class="token number">0x808080</span><span class="token punctuation">,</span>
      <span class="token number">0xA0522D</span><span class="token punctuation">,</span>
      <span class="token number">0xC71585</span><span class="token punctuation">,</span>
      <span class="token string">'res/images/star.png'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="实现-render-方法"><a href="#实现-render-方法" aria-hidden="true" class="header-anchor">#</a> 实现 render 方法</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过初始化的参数渲染出食物</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foodNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> food <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">// 随机食物颜色</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token function">Math。random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 简单判断当前索引是什么类型 png 贴图就创建精灵类， 如果是颜色就通过 Graphics 绘制普通食物。</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">png</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      food <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawSprite</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      food <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawCircle</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将食物添加到食物的 layer 容器中，以展示。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 将食物容器添加到 StartLayer。</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>layer<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">drawSprite</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>x， y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> texture <span class="token operator">=</span> Tiny<span class="token punctuation">.</span>Texture<span class="token punctuation">.</span><span class="token function">fromImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiny<span class="token punctuation">.</span>Sprite</span><span class="token punctuation">(</span>texture<span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">0.06</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">setAnchor</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> food<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里注意一下， 有没有发现这和原生 canvas api 完全一致?</span>
<span class="token function-variable function">drawCircle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>maxR<span class="token punctuation">,</span> minR<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foodConfig<span class="token punctuation">;</span>
  <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">(</span>maxR <span class="token operator">-</span> minR<span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> minR<span class="token punctuation">;</span>
  <span class="token keyword">let</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiny<span class="token punctuation">.</span>Graphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">beginFill</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">[</span>idx <span class="token operator">%</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">setPosition</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  food<span class="token punctuation">.</span><span class="token function">endFill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> food<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 这里贴上弱爆的 random 坐标方法。</span>
<span class="token function-variable function">randomPos</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>width<span class="token punctuation">,</span> height<span class="token punctuation">}</span> <span class="token operator">=</span> Tiny<span class="token punctuation">.</span><span class="token constant">WIN_SIZE</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span>maxR<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foodConfig<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    x <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>width <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> maxR<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> maxR<span class="token punctuation">,</span>
    y <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>height <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> maxR<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> maxR
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>不得不说 Tiny 的 graphics 和 canvas 原生 api 完全一致，无上手成本，放心撸代码吧。</p><h5 id="食物类和蛇类我们都实现好了，现在我们需要让蛇动起来。"><a href="#食物类和蛇类我们都实现好了，现在我们需要让蛇动起来。" aria-hidden="true" class="header-anchor">#</a> 食物类和蛇类我们都实现好了，现在我们需要让蛇动起来。</h5><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
 * 我们可以通过最挫的 setInterval 定时的去调用蛇类的 run 成员方法，但是这是十分不精确的。至于为什么不精确，请自行 google，setInterval 的运行机制。
 * 其实这里 Tiny 提供了一个游戏的主调度， 按照一秒60帧去不断的调用你的代码。
 */</span>
Tiny<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token punctuation">(</span>Tiny<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span>shared<span class="token punctuation">.</span>lastTime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.js-game-time'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">游戏时间: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">s</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>snake<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>food<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在我们的主容器 StartLayer 中，使用 Tiny 的<code>onUpdate</code>方法，这是 Tiny 的主调度，该方法接受一个函数为参数，会定时执行这个函数。我们只需要将蛇类的 run 方法在这里调用就可以了。</p><p>同时你可以通过<code>Tiny.ticker</code>获取当前主调度的各种时间参数。比如这里获取了已经执行了多久了。</p><blockquote><p>现在我们已经基本完成了贪吃蛇开发的 60%，还有 40%的内容是摇杆功能，这里就不再讲了。有兴趣的同学，可以在 github 上看看 control 的实现。上面的代码省略了部分处理逻辑，详情请移步 github;</p></blockquote><p>奉上 github 地址: <a href="https://github.com/Zz0819/snake" target="_blank" rel="noopener noreferrer">传送门<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>初次体验Tiny开发，整体开发还是挺顺利的，没有什么特别难懂的地方。有不明白的多拿捏一下文档，就能发现解决办法。</p><p>以上</p><p>作者-遥清</p></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/blogs/mole.html" class="prev">
          地鼠和它们的地洞
        </a></span><span class="next"><a href="/blogs/doodle.html">
          【上手】用 Tiny 写个 DoodleJump 给你看
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/app.43fa66e0.js" defer></script><script src="/assets/js/191.51df370c.js" defer></script>
  </body>
</html>
