<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Audio.html">Audio</a><ul class='methods'><li data-type='method'><a href="Audio.html#pause">pause</a></li><li data-type='method'><a href="Audio.html#play">play</a></li><li data-type='method'><a href="Audio.html#remove">remove</a></li><li data-type='method'><a href="Audio.html#reset">reset</a></li><li data-type='method'><a href="Audio.html#stop">stop</a></li></ul></li><li><a href="AudioAnalyser.html">AudioAnalyser</a><ul class='methods'><li data-type='method'><a href="AudioAnalyser.html#getAverageFrequency">getAverageFrequency</a></li><li data-type='method'><a href="AudioAnalyser.html#getFrequencyData">getFrequencyData</a></li></ul></li><li><a href="AudioManager.html">AudioManager</a><ul class='methods'><li data-type='method'><a href="AudioManager.html#getAudio">getAudio</a></li><li data-type='method'><a href="AudioManager.html#pause">pause</a></li><li data-type='method'><a href="AudioManager.html#removeAudio">removeAudio</a></li><li data-type='method'><a href="AudioManager.html#resume">resume</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-audio.html">audio</a></li></ul><h3>Externals</h3><ul><li><a href="external-Tiny.html">Tiny</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>tinyjs-plugin-audio</h1><blockquote>
<p>Tiny.js 音效插件</p>
</blockquote>
<h2>查看demo</h2><p>http://tinyjs.net/plugins/tinyjs-plugin-audio.html#demo</p>
<h2>引用方法</h2><ul>
<li><p>推荐作为依赖使用</p>
<ul>
<li><code>npm install tinyjs-plugin-audio --save</code></li>
</ul>
</li>
<li><p>也可以直接引用线上cdn地址，注意要使用最新的版本号，例如：</p>
<ul>
<li>https://gw.alipayobjects.com/as/g/tiny-plugins/tinyjs-plugin-audio/1.2.0/index.js</li>
<li>https://gw.alipayobjects.com/as/g/tiny-plugins/tinyjs-plugin-audio/1.2.0/index.debug.js</li>
</ul>
</li>
</ul>
<h2>起步</h2><p>首先当然是要引入，推荐<code>NPM</code>方式，当然你也可以使用<code>CDN</code>或下载独立版本，先从几个例子入手吧！</p>
<h5>1、最简单的例子</h5><p>引用 Tiny.js 源码</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://gw.alipayobjects.com/as/g/tiny/tiny/1.2.0/tiny.js&quot;>&lt;/script></code></pre><pre class="prettyprint source lang-js"><code>require('tinyjs-plugin-audio');
// 或者
// import audio from 'tinyjs-plugin-audio';

// 加载音频并获取 Audio 对象
var loader = new Tiny.loaders.Loader();
loader.add([
  {name: 'music', url: 'https://os.alipayobjects.com/rmsportal/aVTYsHoGDVBnqXKuYDrs.mp3'}
]).load(function() {
  var music = Tiny.audio.manager.getAudio('music');
  // music.play();
  // music.stop();
});</code></pre><h2>依赖</h2><ul>
<li><code>Tiny.js</code>: <a href="http://tinyjs.net/api">Link</a></li>
</ul>
<h2>API文档</h2><p>http://tinyjs.net/plugins/tinyjs-plugin-audio.html#docs</p>
<h2>注意事项</h2><ul>
<li><p>iOS 11 对于音频播放更加严格，建议 iOS 10 及以上全部使用 WebAudio 模式播放。</p>
<ul>
<li>当使用 <code>disableWebAudio</code> 模式时（即使用 <code>AudioElement</code> 播放），会导致 load 被堵塞无法完成加载。因为 iOS 11 把音频加载完全阻止。</li>
</ul>
<pre class="prettyprint source lang-js"><code>// 简单的示例，最终以实际情况为准。(注意 iOS 8 模拟器 ua 存在问题，8.3 以后得到修复。)
var ua = window.navigator.userAgent;
var matchesSafari = ua.match(/Version\/(\d+)/);
var matchesOS = ua.match(/OS\s(\d+)/);
if(ua.indexOf('iPhone') > -1 && (matchesOS[1] >= 10 || matchesSafari[1] >= 10)) {
  window.disableWebAudio = false;
} else {
  window.disableWebAudio = true;
}
// 安卓根据设备自行判断机型决定使用哪种模式。</code></pre></li>
<li><p>iOS 10 以下对 <code>audioContext</code> 支持不好。会出现播放音频迟缓，杂音很重甚至会听不到音乐。</p>
<ul>
<li>建议 iOS 10 以下使用 <code>audio</code> 标签方式播放。使用姿势，在引入 tinyjs-plugin-audio 之前，配置 <code>window.disableWebAudio = true</code> 即可。</li>
<li>当使用 disableWebAudio 模式时，<code>AudioAnalyser</code> 将无法使用，实例化会 warning，接口会返回[]和0。</li>
<li>当使用 disableWebAudio 模式时，iOS 表现为 <code>volume</code> 无法 <code>set</code>，<code>get</code> 始终返回 1。原因是 <code>iOS</code> 物理音量优先级高于 <code>audio</code> 音量控制，不允许 js 设置音量。</li>
</ul>
</li>
<li><p>iOS 9 以下退出 WebView 或压后台音乐不会暂停。</p>
<ul>
<li>建议监听相应系统事件清掉 audio 对象或暂停音乐播放</li>
</ul>
</li>
<li><p>iOS 默认不允许音频自动播放问题。</p>
<ul>
<li>建议在 Tiny 的 <code>Loader</code> 资源加载完成后，通过用户行为触发音频播放。（如 document 触发点击，就调用 play 方法。）</li>
</ul>
</li>
<li><p>[重要]建议所有资源统一加载。如果特殊情况需要后加载，需要重新实例化一个 Tiny <code>Loader</code>。</p>
<pre class="prettyprint source lang-js"><code>// 重新实例化 loader，不要直接在 Tiny.loader 上直接调用 add 方法，将会导致资源无法加载。
var loader = new Tiny.loaders.Loader();
loader.add({
  {name: 'music', url: 'https://os.alipayobjects.com/rmsportal/aVTYsHoGDVBnqXKuYDrs.mp3'}
}).load(function() {
  var music = Tiny.audio.manager.getAudio('music');
  //your code here
});</code></pre></li>
</ul></article>
    </section>









<section>

<header>
    
        <h2>
        index.js
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>fangjun.yfj</li>
        </ul>
    </dd>
    

    

    

    

    

    

    
</dl>




        
            <div class="description">Tiny.js 音效插件</div>
        

        
    
    </div>

    

    

    

     

    

    

    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jul 27 2021 16:23:50 GMT+0800 (GMT+08:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>