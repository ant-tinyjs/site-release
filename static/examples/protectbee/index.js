!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=47)}([function(e,t){var n=e.exports={version:"2.6.3"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(63),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){e.exports={default:n(60),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var i,r=n(40),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var i=a(n(87)),r=a(n(91)),o=a(n(40));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(6),r=n(0),o=n(33),a=n(12),u=n(10),s=function(e,t,n){var l,c,f,d=e&s.F,h=e&s.G,p=e&s.S,y=e&s.P,v=e&s.B,_=e&s.W,m=h?r:r[t]||(r[t]={}),g=m.prototype,T=h?i:p?i[t]:(i[t]||{}).prototype;for(l in h&&(n=t),n)(c=!d&&T&&void 0!==T[l])&&u(m,l)||(f=c?T[l]:n[l],m[l]=h&&"function"!=typeof T[l]?n[l]:v&&c?o(f,i):_&&T[l]==f?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):y&&"function"==typeof f?o(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[l]=f,e&s.R&&g&&!g[l]&&a(g,l,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var i=n(15),r=n(34),o=n(22),a=Object.defineProperty;t.f=n(9)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(53),r=n(23);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(8),r=n(17);e.exports=n(9)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(26)("wks"),r=n(20),o=n(6).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){var i=n(13);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(36),r=n(27);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t){e.exports=!0},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(13);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(26)("keys"),r=n(20);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(0),r=n(6),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(19)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports={}},function(e,t,n){var i=n(15),r=n(71),o=n(27),a=n(25)("IE_PROTO"),u=function(){},s=function(){var e,t=n(35)("iframe"),i=o.length;for(t.style.display="none",n(72).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;i--;)delete s.prototype[o[i]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=i(e),n=new u,u.prototype=null,n[a]=e):n=s(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(8).f,r=n(10),o=n(14)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(14)},function(e,t,n){var i=n(6),r=n(0),o=n(19),a=n(31),u=n(8).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(51);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(9)&&!n(16)(function(){return 7!=Object.defineProperty(n(35)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(13),r=n(6).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(10),r=n(11),o=n(54)(!1),a=n(25)("IE_PROTO");e.exports=function(e,t){var n,u=r(e),s=0,l=[];for(n in u)n!=a&&i(u,n)&&l.push(n);for(;t.length>s;)i(u,n=t[s++])&&(~o(l,n)||l.push(n));return l}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(23);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(10),r=n(38),o=n(25)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";t.__esModule=!0;var i=a(n(66)),r=a(n(77)),o="function"==typeof r.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){"use strict";var i=n(19),r=n(7),o=n(42),a=n(12),u=n(28),s=n(70),l=n(30),c=n(39),f=n(14)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,y,v,_){s(n,t,p);var m,g,T,b=function(e){if(!d&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",x="values"==y,w=!1,P=e.prototype,O=P[f]||P["@@iterator"]||y&&P[y],C=O||b(y),k=y?x?b("entries"):C:void 0,E="Array"==t&&P.entries||O;if(E&&(T=c(E.call(new e)))!==Object.prototype&&T.next&&(l(T,S,!0),i||"function"==typeof T[f]||a(T,f,h)),x&&O&&"values"!==O.name&&(w=!0,C=function(){return O.call(this)}),i&&!_||!d&&!w&&P[f]||a(P,f,C),u[t]=C,u[S]=h,y)if(m={values:x?C:b("values"),keys:v?C:b("keys"),entries:k},_)for(g in m)g in P||o(P,g,m[g]);else r(r.P+r.F*(d||w),t,m);return m}},function(e,t,n){e.exports=n(12)},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(36),r=n(27).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(21),r=n(17),o=n(11),a=n(22),u=n(10),s=n(34),l=Object.getOwnPropertyDescriptor;t.f=n(9)?l:function(e,t){if(e=o(e),t=a(t,!0),s)try{return l(e,t)}catch(e){}if(u(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(n(3)),r=v(n(1)),o=v(n(2)),a=v(n(4)),u=v(n(5)),s=v(n(94)),l=v(n(95)),c=v(n(97)),f=v(n(98)),d=v(n(99)),h=v(n(100)),p=v(n(101)),y=v(n(102));function v(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){(0,r.default)(this,t);var e=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e._background=Tiny.Sprite.fromImage(Tiny.resources.bgJPG),e._background.setScale(2),e._hero=new s.default(e),e._dustCell=new l.default(e),e._linesContainer=new Tiny.Container,e._lines=new f.default,e._bombConatainer=new c.default(e),e._gameOverLayer=new h.default(e),e._collisionManager=new y.default(e),e._score=new d.default(e),e._pauseLayer=new p.default(e),e._die=!1,e._speed=1,e._times=0,e._lCurrentTime=0,e._slCurrentTime=0,e._clCurrentTime=0,e._lTime=312.5,e._slTime=62.5,e._clTime=62.5,e._lTicker=!0,e._slTicker=!1,e._clTicker=!1,e.init(),e}return(0,u.default)(t,e),(0,o.default)(t,[{key:"init",value:function(){this.addChild(this._background),this.addChild(this._linesContainer),this.addChild(this._hero),this.addChild(this._dustCell),this.addChild(this._bombConatainer),this.addChild(this._score),this.addChild(this._pauseLayer),this.addChild(this._gameOverLayer),this.start()}},{key:"updateTransform",value:function(){this._die||(this._lTicker&&this.lTick(),this._slTicker&&this.slTick()),this._clTicker&&this.clearTick(),this._collisionManager.update(),this.containerUpdateTransform()}},{key:"start",value:function(){this._die=!1,this._times=0,this._hero.resume(),this._dustCell.clear(),this._lines.reset(),this._gameOverLayer.setVisible(!1)}},{key:"gameOver",value:function(){this._die=!0,this._hero.die(),this._dustCell.create(this._hero.getPositionX(),this._hero.getPositionY()),this._gameOverLayer.setVisible(!0)}},{key:"createLines",value:function(e){this._lines.create(e),this._linesContainer.removeChildren(),this._linesContainer.addChild(this._lines),e&&(this._lines.data=Tiny.app.renderer.plugins.extract.pixels(this._lines))}},{key:"lTick",value:function(){this._lCurrentTime+=this._speed;var e=this._lCurrentTime+.5|0;this._lCurrentTime=this._lCurrentTime%this._lTime,e>=this._lTime&&(this._times++,this._score.show(this._times),this.createLines(),this._lTicker=!1,this._slTicker=!0,this._clTicker=!1)}},{key:"slTick",value:function(){this._slCurrentTime+=this._speed;var e=this._slCurrentTime+.5|0;this._slCurrentTime=this._slCurrentTime%this._slTime,e>=this._slTime&&(this.createLines(!0),this._lTicker=!0,this._slTicker=!1,this._clTicker=!0)}},{key:"clearTick",value:function(){this._clCurrentTime+=this._speed;var e=this._clCurrentTime+.5|0;this._clCurrentTime=this._clCurrentTime%this._clTime,e>=this._clTime&&(this._linesContainer.removeChildren(),this._lines.clear(),this._lTicker=!0,this._slTicker=!1,this._clTicker=!1)}},{key:"isDead",value:function(){return this._die}},{key:"pause",value:function(){this._pauseLayer.show()}}]),t}(Tiny.Container);t.default=_},function(e,t,n){"use strict";var i=u(n(48)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(57)),o=u(n(59)),a=u(n(46));function u(e){return e&&e.__esModule?e:{default:e}}n(103),n(104);var s={showFPS:!0,referWidth:375,dpi:2,renderType:Tiny.RENDERER_TYPE.CANVAS,renderOptions:{backgroundColor:16777215}};-1===navigator.userAgent.toLowerCase().indexOf("mobile")&&(s.width=window.innerWidth,s.height=window.innerHeight,s.fixSize=!0),Tiny.app=new Tiny.Application(s),{init:function(){Tiny.resources=r,this.resourceLoad()},resourceLoad:function(){var e=document.getElementById("progress"),t=document.getElementById("percent");Tiny.Loader.run({resources:(0,i.default)(r),onProgress:function(n,i){var r=~~n;t.innerHTML=r+"%",e.style.width=r+"%"},onAllComplete:function(){var n=document.body;n.removeChild(t),n.removeChild(e.parentNode),Tiny.app.run(new o.default)}})}}.init(),document.addEventListener("pause",function(e){var t=Tiny.app.stage.children[0];if(t instanceof a.default)return t.pause(),Tiny.app.render(),void Tiny.app.pause();Tiny.app.pause()},!1),document.addEventListener("resume",function(e){Tiny.app.stage.children[0]instanceof a.default||Tiny.app.resume()},!1)},function(e,t,n){e.exports={default:n(49),__esModule:!0}},function(e,t,n){n(50),e.exports=n(0).Object.values},function(e,t,n){var i=n(7),r=n(52)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(18),r=n(11),o=n(21).f;e.exports=function(e){return function(t){for(var n,a=r(t),u=i(a),s=u.length,l=0,c=[];s>l;)o.call(a,n=u[l++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t,n){var i=n(37);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(11),r=n(55),o=n(56);e.exports=function(e){return function(t,n,a){var u,s=i(t),l=r(s.length),c=o(a,l);if(e&&n!=n){for(;l>c;)if((u=s[c++])!=u)return!0}else for(;l>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(24),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(24),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tilesetVendorJSON=t.bgJPG=void 0,n(58);t.bgJPG="res/images/bg.jpg",t.tilesetVendorJSON="res/images/tilesets/tileset-vendor.json"},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(3)),r=l(n(1)),o=l(n(2)),a=l(n(4)),u=l(n(5)),s=l(n(46));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){(0,r.default)(this,t);var e=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this)),n=new Tiny.Container,o=new Tiny.AnimatedSprite([Tiny.Texture.fromFrame("tileset-vendor-hero-1.png"),Tiny.Texture.fromFrame("tileset-vendor-hero-2.png")]);o.animationSpeed=.05,o.setAnchor(.5),o.setPositionY(-20),o.play(),n.addChild(o);var u=Tiny.Sprite.fromFrame("tileset-vendor-title.png");u.setAnchor(.5),u.setScale(2),u.setPositionY(u.height),n.addChild(u);var s=new Tiny.Text("移动蜜蜂，躲避激光和导弹，不要让它受伤害",{fill:"#999999"});s.setAnchor(.5),s.setPositionY(u.height+o.height+s.height),n.addChild(s),e.addChild(n),n.setPosition(Tiny.WIN_SIZE.width/2,.2*Tiny.WIN_SIZE.height);var l=Tiny.Sprite.fromFrame("tileset-vendor-start.png");return l.setAnchor(.5),l.setScale(1.6),l.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height/2+100),l.setEventEnabled(!0),l.on("pointerdown",e.onReady),e.addChild(l),e}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onReady",value:function(){Tiny.app.replaceScene(new s.default)}}]),t}(Tiny.Container);t.default=c},function(e,t,n){n(61),e.exports=n(0).Object.getPrototypeOf},function(e,t,n){var i=n(38),r=n(39);n(62)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(7),r=n(0),o=n(16);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(64),__esModule:!0}},function(e,t,n){n(65);var i=n(0).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(7);i(i.S+i.F*!n(9),"Object",{defineProperty:n(8).f})},function(e,t,n){e.exports={default:n(67),__esModule:!0}},function(e,t,n){n(68),n(73),e.exports=n(31).f("iterator")},function(e,t,n){"use strict";var i=n(69)(!0);n(41)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(24),r=n(23);e.exports=function(e){return function(t,n){var o,a,u=String(r(t)),s=i(n),l=u.length;return s<0||s>=l?e?"":void 0:(o=u.charCodeAt(s))<55296||o>56319||s+1===l||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):o:e?u.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(29),r=n(17),o=n(30),a={};n(12)(a,n(14)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(8),r=n(15),o=n(18);e.exports=n(9)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),u=a.length,s=0;u>s;)i.f(e,n=a[s++],t[n]);return e}},function(e,t,n){var i=n(6).document;e.exports=i&&i.documentElement},function(e,t,n){n(74);for(var i=n(6),r=n(12),o=n(28),a=n(14)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var l=u[s],c=i[l],f=c&&c.prototype;f&&!f[a]&&r(f,a,l),o[l]=o.Array}},function(e,t,n){"use strict";var i=n(75),r=n(76),o=n(28),a=n(11);e.exports=n(41)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(78),__esModule:!0}},function(e,t,n){n(79),n(84),n(85),n(86),e.exports=n(0).Symbol},function(e,t,n){"use strict";var i=n(6),r=n(10),o=n(9),a=n(7),u=n(42),s=n(80).KEY,l=n(16),c=n(26),f=n(30),d=n(20),h=n(14),p=n(31),y=n(32),v=n(81),_=n(82),m=n(15),g=n(13),T=n(11),b=n(22),S=n(17),x=n(29),w=n(83),P=n(45),O=n(8),C=n(18),k=P.f,E=O.f,I=w.f,M=i.Symbol,j=i.JSON,A=j&&j.stringify,L=h("_hidden"),N=h("toPrimitive"),R={}.propertyIsEnumerable,F=c("symbol-registry"),W=c("symbols"),D=c("op-symbols"),G=Object.prototype,V="function"==typeof M,Z=i.QObject,B=!Z||!Z.prototype||!Z.prototype.findChild,Y=o&&l(function(){return 7!=x(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=k(G,t);i&&delete G[t],E(e,t,n),i&&e!==G&&E(G,t,i)}:E,z=function(e){var t=W[e]=x(M.prototype);return t._k=e,t},X=V&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},U=function(e,t,n){return e===G&&U(D,t,n),m(e),t=b(t,!0),m(n),r(W,t)?(n.enumerable?(r(e,L)&&e[L][t]&&(e[L][t]=!1),n=x(n,{enumerable:S(0,!1)})):(r(e,L)||E(e,L,S(1,{})),e[L][t]=!0),Y(e,t,n)):E(e,t,n)},J=function(e,t){m(e);for(var n,i=v(t=T(t)),r=0,o=i.length;o>r;)U(e,n=i[r++],t[n]);return e},H=function(e){var t=R.call(this,e=b(e,!0));return!(this===G&&r(W,e)&&!r(D,e))&&(!(t||!r(this,e)||!r(W,e)||r(this,L)&&this[L][e])||t)},K=function(e,t){if(e=T(e),t=b(t,!0),e!==G||!r(W,t)||r(D,t)){var n=k(e,t);return!n||!r(W,t)||r(e,L)&&e[L][t]||(n.enumerable=!0),n}},q=function(e){for(var t,n=I(T(e)),i=[],o=0;n.length>o;)r(W,t=n[o++])||t==L||t==s||i.push(t);return i},Q=function(e){for(var t,n=e===G,i=I(n?D:T(e)),o=[],a=0;i.length>a;)!r(W,t=i[a++])||n&&!r(G,t)||o.push(W[t]);return o};V||(u((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(D,n),r(this,L)&&r(this[L],e)&&(this[L][e]=!1),Y(this,e,S(1,n))};return o&&B&&Y(G,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",function(){return this._k}),P.f=K,O.f=U,n(44).f=w.f=q,n(21).f=H,n(43).f=Q,o&&!n(19)&&u(G,"propertyIsEnumerable",H,!0),p.f=function(e){return z(h(e))}),a(a.G+a.W+a.F*!V,{Symbol:M});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)h($[ee++]);for(var te=C(h.store),ne=0;te.length>ne;)y(te[ne++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return r(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){B=!0},useSimple:function(){B=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?x(e):J(x(e),t)},defineProperty:U,defineProperties:J,getOwnPropertyDescriptor:K,getOwnPropertyNames:q,getOwnPropertySymbols:Q}),j&&a(a.S+a.F*(!V||l(function(){var e=M();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(g(t)||void 0!==e)&&!X(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),i[1]=t,A.apply(j,i)}}),M.prototype[N]||n(12)(M.prototype,N,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){var i=n(20)("meta"),r=n(13),o=n(10),a=n(8).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(16)(function(){return s(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++u,w:{}}})},f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return l&&f.NEED&&s(e)&&!o(e,i)&&c(e),e}}},function(e,t,n){var i=n(18),r=n(43),o=n(21);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,u=n(e),s=o.f,l=0;u.length>l;)s.call(e,a=u[l++])&&t.push(a);return t}},function(e,t,n){var i=n(37);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(11),r=n(44).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,t){},function(e,t,n){n(32)("asyncIterator")},function(e,t,n){n(32)("observable")},function(e,t,n){e.exports={default:n(88),__esModule:!0}},function(e,t,n){n(89),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){var i=n(7);i(i.S,"Object",{setPrototypeOf:n(90).set})},function(e,t,n){var i=n(13),r=n(15),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(33)(Function.call,n(45).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(92),__esModule:!0}},function(e,t,n){n(93);var i=n(0).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(7);i(i.S,"Object",{create:n(29)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(3)),r=s(n(1)),o=s(n(2)),a=s(n(4)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){(0,r.default)(this,t);var n=[Tiny.Texture.fromFrame("tileset-vendor-hero-1.png"),Tiny.Texture.fromFrame("tileset-vendor-hero-2.png")],o=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));return o._layer=e,o.data=Tiny.app.renderer.plugins.extract.pixels(o),o.animationSpeed=.05,o.setAnchor(.5),o.setRotation(Tiny.deg2radian(-10)),o.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height/2),o.setEventEnabled(!0),o.play(),o.swing(),o.listenDrag(),o}return(0,u.default)(t,e),(0,o.default)(t,[{key:"listenDrag",value:function(){var e=this,t=!1,n=null,i=function(e){t=!1,n=null};this.on("pointerdown",function(e){e.stopPropagation(),n=e,t=!0}),this.on("pointerup",i),this.on("pointerupoutside",i),this.on("pointermove",function(i){var r=e._layer;if(t&&n&&!r.isDead()){var o=n.data.getLocalPosition(e.parent);e.setPosition(o.x,o.y),r._collisionManager.heroVsLines()&&r.gameOver()}})}},{key:"swing",value:function(){var e=Tiny.RotateTo(200,{rotation:Tiny.deg2radian(10)});this.runAction(Tiny.RepeatForever(Tiny.Back(e)))}},{key:"die",value:function(){this.setVisible(!1)}},{key:"resume",value:function(){this.setVisible(!0),this.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height/2)}}]),t}(Tiny.AnimatedSprite);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(3)),r=l(n(1)),o=l(n(2)),a=l(n(4)),u=l(n(5)),s=l(n(96));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n._layer=e,n._instance=null,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"updateTransform",value:function(){this._layer.isDead()&&this._instance&&this._instance.update(),this.containerUpdateTransform()}},{key:"create",value:function(e,t){return this._instance=new s.default(e,t,function(){return Tiny.Sprite.fromFrame("tileset-vendor-fragment.png")},this,{number:50,gravity:.01,randomSpacing:!0,minAngle:1,maxAngle:6.18,minSize:2,maxSize:12,minSpeed:2,maxSpeed:12,minScaleSpeed:5e-4,maxScaleSpeed:.001,minAlphaSpeed:5e-4,maxAlphaSpeed:.001,minRotationSpeed:-.1,maxRotationSpeed:.1}),this._instance}},{key:"clear",value:function(){this.removeChildren()}}]),t}(Tiny.Container);t.default=c},function(e,t){
/*!
 * Name: tinyjs-plugin-dust
 * Description: Dust is a quick and easy particle effects engine
 * Author: yiiqii
 * Version: v0.1.5
 */
var n=n||{};window=window||n.window;var i=n.Tiny;i=i||window.Tiny;var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,o,a,u){if(r(this,e),this.x=t||0,this.y=n||0,this.spriteFn=o,this.container=a||new i.Container,!o)throw new Error("Sprite is needed.");u=u||{},this.number=u.number||20,this.gravity=u.gravity||0,this.randomSpacing=!!i.isUndefined(u.randomSpacing)||u.randomSpacing,this.minAngle=u.minAngle||0,this.maxAngle=u.maxAngle||6.28,this.minSize=u.minSize||4,this.maxSize=u.maxSize||16,this.minSpeed=u.minSpeed||.3,this.maxSpeed=u.maxSpeed||3,this.minScaleSpeed=u.minScaleSpeed||.01,this.maxScaleSpeed=u.maxScaleSpeed||.05,this.minAlphaSpeed=u.minAlphaSpeed||.02,this.maxAlphaSpeed=u.maxAlphaSpeed||.02,this.minRotationSpeed=u.minRotationSpeed||.01,this.maxRotationSpeed=u.maxRotationSpeed||.03,this.particles=[],this.angles=[];var s=this,l=void 0,c=(this.maxAngle-this.minAngle)/(this.number-1);e.globalParticles.push(this.particles);for(var f=0;f<this.number;f++)this.randomSpacing?(l=i.randomFloat(this.minAngle,this.maxAngle),this.angles.push(l)):(void 0===l&&(l=this.minAngle),this.angles.push(l),l+=c);this.angles.forEach(function(e){return s.makeParticle(e)})}return o(e,[{key:"makeParticle",value:function(e){var t=this.spriteFn(),n=this.gravity,r=this.particles,o=this.container;t.totalFrames>0&&t.gotoAndStop(i.randomInt(0,t.totalFrames-1));var a=i.randomInt(this.minSize,this.maxSize);t.width=a,t.height=a,t.x=this.x,t.y=this.y,t.scaleSpeed=i.randomFloat(this.minScaleSpeed,this.maxScaleSpeed),t.alphaSpeed=i.randomFloat(this.minAlphaSpeed,this.maxAlphaSpeed),t.rotationSpeed=i.randomFloat(this.minRotationSpeed,this.maxRotationSpeed);var u=i.randomFloat(this.minSpeed,this.maxSpeed);t.vx=u*Math.cos(e),t.vy=u*Math.sin(e),r.push(t),o.addChild(t),t.updateParticle=function(){t.vy+=n,t.x+=t.vx,t.y+=t.vy,t.scale.x-t.scaleSpeed>0&&(t.scale.x-=t.scaleSpeed),t.scale.y-t.scaleSpeed>0&&(t.scale.y-=t.scaleSpeed),t.rotation+=t.rotationSpeed,t.alpha-=t.alphaSpeed,t.alpha<=0&&(o.removeChild(t),r.splice(r.indexOf(t),1))}}},{key:"update",value:function(){if(e.globalParticles.length>0)for(var t=e.globalParticles.length-1;t>=0;t--){var n=e.globalParticles[t];if(n.length>0)for(var i=n.length-1;i>=0;i--){n[i].updateParticle()}else e.globalParticles.splice(e.globalParticles.indexOf(n),1)}}}]),e}();a.globalParticles=[];var u=a;e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(3)),r=s(n(1)),o=s(n(2)),a=s(n(4)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n._layer=e,n._bombList=[],n._pos={x:0,y:0},n._bombSet={num:0,counter:0,ran:0,posX:0,posY:0,isBig:!1},n._speed=1,n._currentTime=0,n._time=30,n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"updateTransform",value:function(){this.tick(),this.containerUpdateTransform()}},{key:"create",value:function(){var e=this,t=this._layer,n=this._bombSet,i=t._hero,r=Tiny.Sprite.fromFrame("tileset-vendor-bomb.png"),o=r.width,a=r.height,u=Tiny.WIN_SIZE.width,s=Tiny.WIN_SIZE.height,l=-o,c=-a,f=i.getPositionX(),d=i.getPositionY(),h=0,p=Tiny.randomFromArray([.2,.2,.2,.2,.2,.2,.5,.5,.5,.8]),y=.2===p?6e3:8e3;t.isDead()&&(f=Tiny.randomInt(0,Tiny.WIN_SIZE.width),d=Tiny.randomInt(0,Tiny.WIN_SIZE.height)),n.counter>=n.num?(n.counter=0,n.num=Tiny.randomInt(8,16),n.ran=Tiny.randomBool(),n.x=Tiny.randomInt(0,u),n.y=Tiny.randomInt(0,s),n.posX=Tiny.randomFromArray([-o,u]),n.posY=Tiny.randomFromArray([-a,s]),n.isBig=!1):.8===p&&(this.isBig?p=.2:(this.isBig=!0,y=12e3)),r.setScale(p),n.counter++;var v=n.x,_=n.y;n.ran?(this._pos.x=n.posX,this._pos.y=_,c=u*((d-_)/f)+_,h=Math.atan2(_-c,u+l),this._pos.x===-o&&(l=u+o,h=Tiny.PI_2/2-Math.atan2(_-c,l))):(this._pos.x=v,this._pos.y=n.posY,l=s*((f-v)/d)+v,h=Math.atan2(s+c,v-l),this._pos.y===-a&&(c=s+a,h=-Math.atan2(c,v-l))),r.setPosition(this._pos.x,this._pos.y),r.setRotation(h),this.addChild(r);var m=Tiny.MoveTo(y,{x:[l],y:[c]});m.onComplete=function(){e.removeChild(r),Tiny.arrayRemoveObject(e._bombList,r)},r.runAction(m),r.data=Tiny.app.renderer.plugins.extract.pixels(r),this._bombList.push(r)}},{key:"clear",value:function(){this.removeChildren()}},{key:"tick",value:function(){this._currentTime+=this._speed;var e=this._currentTime+.5|0;if(this._currentTime=this._currentTime%this._time,e>=this._time)for(var t=0;t<Tiny.randomFromArray([1,2,3,4]);t++)this.create()}}]),t}(Tiny.Container);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(3)),r=s(n(1)),o=s(n(2)),a=s(n(4)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){(0,r.default)(this,t);var e=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e._g=new Tiny.Graphics,e._solidify=!1,e._lineNum=10,e._maxLineNum=28,e._lineGroup=[],e}return(0,u.default)(t,e),(0,o.default)(t,[{key:"create",value:function(e){var t=Tiny.WIN_SIZE.width+16,n=Tiny.WIN_SIZE.height+16,i=this._g;if(this._solidify=e,i.clear(),this._solidify)this._lineGroup.forEach(function(e){var t=e[1],n=e[2],r=e[3],o=e[4];i.lineStyle(2*e[0],3355443),i.moveTo(t,n),i.lineTo(r,o)});else{++this._lineNum,this._lineNum>=this._maxLineNum&&(this._lineNum=this._maxLineNum);for(var r=0;r<this._lineNum;r++){var o=void 0,a=void 0,u=void 0,s=void 0,l=Tiny.randomBool(),c=Tiny.randomFromArray([1,1,2,2,2,3,3,3,4,6,8]),f=Tiny.randomFromArray([-1,0,0,0,0,0,0,1])%2;l?(o=-16,a=Tiny.random(-16,n),-1===f?(u=Tiny.random(t/2,t),s=n):0===f?(u=t,s=Tiny.random(-16,n)):(u=Tiny.random(t/2,t),s=-16)):(o=Tiny.random(-16,t),a=-16,-1===f?(u=-16,s=Tiny.random(n/2,n)):0===f?(u=Tiny.random(-16,t),s=n):(u=t,s=Tiny.random(n/2,n))),this._lineGroup.push([c,o,a,u,s,f,l]),i.lineStyle(2,3355443,.1),i.moveTo(o,a),i.lineTo(u,s)}}var d=Tiny.app.renderer.generateTexture(i),h=new Tiny.Sprite(d);h.position.x-=16,h.position.y-=16,this.removeChildren(),this.addChild(h)}},{key:"clear",value:function(){this._lineGroup=[],this._g.clear(),this.removeChildren()}},{key:"reset",value:function(){this._lineNum=10}},{key:"run",value:function(){}}]),t}(Tiny.Container);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(3)),r=s(n(1)),o=s(n(2)),a=s(n(4)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){(0,r.default)(this,t);var e=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e._num=0,e.di=Tiny.Sprite.fromFrame("tileset-vendor-di.png"),e.bo=Tiny.Sprite.fromFrame("tileset-vendor-bo.png"),e.di.setPositionX(-100),e.bo.setPositionX(-100),e.di.setScale(2),e.bo.setScale(2),e.addChild(e.di),e.addChild(e.bo),e}return(0,u.default)(t,e),(0,o.default)(t,[{key:"show",value:function(e){var t=this;this._num=e;for(var n=e.toString(),i=n.length,r=0,o=new Tiny.Container,a=0;a<i;a++){var u=Tiny.Sprite.fromFrame("tileset-vendor-"+n[a]+".png");u.setScale(2),r=u.width,u.setPosition(r*a,0),o.addChild(u)}this.di.setPositionX(-this.di.width),this.bo.setPositionX(o.width),this.addChild(o),this.setPosition(Tiny.WIN_SIZE.width/2-o.width/2,-this.height);var s=Tiny.MoveTo(200,{y:80});s.setEasing(Tiny.TWEEN.Easing.Exponential.Out),s.onComplete=function(){t.removeChild(o),Tiny.Action.cleanup(t)},this.runAction(Tiny.Repeat(2,Tiny.Back(s),2200))}},{key:"get",value:function(){return this._num}}]),t}(Tiny.Container);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(3)),r=s(n(1)),o=s(n(2)),a=s(n(4)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));n._layer=e;var o=Tiny.Sprite.fromFrame("tileset-vendor-retry.png");o.setAnchor(.5),o.setScale(2),o.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height/2+120),o.setEventEnabled(!0),o.on("pointerdown",function(){n.onRetry()}),n.addChild(o);var u=Tiny.Sprite.fromFrame("tileset-vendor-share.png");return u.setAnchor(.5),u.setScale(2),u.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height/2+u.height+160),u.setEventEnabled(!0),u.on("pointerdown",function(){n.onShare()}),n.addChild(u),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRetry",value:function(){this._layer.start()}},{key:"onShare",value:function(){var e=this._layer._score.get();window.alert(e?"我很强！我让蜜蜂躲过"+e+"波攻击。":"你行吗？蜜蜂在我手里第一波就挂了。。")}}]),t}(Tiny.Container);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(3)),r=s(n(1)),o=s(n(2)),a=s(n(4)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this));n._layer=e;var o=Tiny.Sprite.fromFrame("tileset-vendor-continue.png");return o.setAnchor(.5),o.setScale(2),o.setPosition(Tiny.WIN_SIZE.width/2,Tiny.WIN_SIZE.height-o.height-50),o.setEventEnabled(!0),o.on("pointerdown",function(){n.setVisible(!1),Tiny.app.resume()}),n.setVisible(!1),n.addChild(o),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"show",value:function(){this.setVisible(!0)}}]),t}(Tiny.Container);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),r=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,i.default)(this,e),this._layer=t}return(0,r.default)(e,[{key:"update",value:function(){var e=this._layer;e.isDead()||(this.heroVsLines()||this.heroVsBomb())&&e.gameOver()}},{key:"heroVsLines",value:function(){var e=this._layer,t=e._hero,n=e._lines;return!(0===e._linesContainer.children.length||!n._solidify)&&Tiny.isPixelCollision(t,t.getPositionX(),t.getPositionY(),!0,n,n.getPositionX()-16,n.getPositionY()-16,!1)}},{key:"heroVsBomb",value:function(){var e=this._layer,t=e._hero,n=e._bombConatainer._bombList,i=!1;return n.forEach(function(e){!i&&(i=Tiny.isPixelCollision(t,t.getPositionX(),t.getPositionY(),!0,e,e.getPositionX(),e.getPositionY(),!1))}),i}}]),e}();t.default=a},function(e,t,n){},function(e,t,n){
/*!
 * Name: tinyjs-plugin-extract
 * Description: 画布扩展，获取画布的：Image 对象、base64 格式的图片、像素值等等
 * Author: yiqi
 * Version: v1.1.0
 */
!function(e){"use strict";var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=new Tiny.Rectangle,r=function(){function e(n){t(this,e),this.renderer=n,n.extract=this}return n(e,[{key:"image",value:function(e){var t=new Image;return t.src=this.base64(e),t}},{key:"base64",value:function(e){return this.canvas(e).toDataURL()}},{key:"canvas",value:function(e){var t=this.renderer,n=void 0,r=void 0,o=void 0,a=!1,u=void 0,s=!1;e&&(e instanceof Tiny.RenderTexture?u=e:(u=this.renderer.generateTexture(e),s=!0)),u?(n=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=n.resolution,o=u.frame,a=!1):(n=this.renderer.rootRenderTarget,r=n.resolution,a=!0,(o=i).width=n.size.width,o.height=n.size.height);var l=o.width*r,c=o.height*r,f=new Tiny.CanvasRenderTarget(l,c,1);if(n){t.bindRenderTarget(n);var d=new Uint8Array(4*l*c),h=t.gl;h.readPixels(o.x*r,o.y*r,l,c,h.RGBA,h.UNSIGNED_BYTE,d);var p=f.context.getImageData(0,0,l,c);p.data.set(d),f.context.putImageData(p,0,0),a&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-c))}return s&&u.destroy(!0),f.canvas}},{key:"pixels",value:function(e){var t=this.renderer,n=void 0,r=void 0,o=void 0,a=void 0,u=!1;e&&(e instanceof Tiny.RenderTexture?a=e:(a=this.renderer.generateTexture(e),u=!0)),a?(n=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=n.resolution,o=a.frame):(n=this.renderer.rootRenderTarget,r=n.resolution,(o=i).width=n.size.width,o.height=n.size.height);var s=o.width*r,l=o.height*r,c=new Uint8Array(4*s*l);if(n){t.bindRenderTarget(n);var f=t.gl;f.readPixels(o.x*r,o.y*r,s,l,f.RGBA,f.UNSIGNED_BYTE,c)}return u&&a.destroy(!0),c}},{key:"destroy",value:function(){this.renderer.extract=null,this.renderer=null}}]),e}();Tiny.WebGLRenderer.registerPlugin("extract",r);var o=new Tiny.Rectangle,a=function(){function e(n){t(this,e),this.renderer=n,n.extract=this}return n(e,[{key:"image",value:function(e){var t=new Image;return t.src=this.base64(e),t}},{key:"base64",value:function(e){return this.canvas(e).toDataURL()}},{key:"canvas",value:function(e){var t=this.renderer,n=void 0,i=void 0,r=void 0,a=void 0;e&&(a=e instanceof Tiny.RenderTexture?e:t.generateTexture(e)),a?(n=a.baseTexture._canvasRenderTarget.context,i=a.baseTexture._canvasRenderTarget.resolution,r=a.frame):(n=t.rootContext,(r=o).width=this.renderer.width,r.height=this.renderer.height);var u=r.width*i,s=r.height*i,l=new Tiny.CanvasRenderTarget(u,s,1),c=n.getImageData(r.x*i,r.y*i,u,s);return l.context.putImageData(c,0,0),l.canvas}},{key:"pixels",value:function(e){var t=this.renderer,n=void 0,i=void 0,r=void 0,a=void 0;return e&&(a=e instanceof Tiny.RenderTexture?e:t.generateTexture(e)),a?(n=a.baseTexture._canvasRenderTarget.context,i=a.baseTexture._canvasRenderTarget.resolution,r=a.frame):(n=t.rootContext,(r=o).width=t.width,r.height=t.height),n.getImageData(0,0,r.width*i,r.height*i).data}},{key:"destroy",value:function(){this.renderer.extract=null,this.renderer=null}}]),e}();Tiny.CanvasRenderer.registerPlugin("extract",a),e.webgl=r,e.canvas=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)}]);